function isEmpty(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!=typeof e)return!0;for(var i in e)if(hasOwnProperty.call(e,i))return!1;return!0}function generPlaces(e){for(places.innerHTML="",i=0;i<40;i++)i%10==0?e.hasOwnProperty("p"+i)?places.innerHTML=places.innerHTML+'<div class="place booked" id="p'+i+'" style="clear: both;"></div>':places.innerHTML=places.innerHTML+'<div class="place free" id="p'+i+'" style="clear: both;"></div>':e.hasOwnProperty("p"+i)?places.innerHTML=places.innerHTML+'<div class="place booked" id="p'+i+'"></div>':places.innerHTML=places.innerHTML+'<div class="place free" id="p'+i+'"></div>'}function clc(){$(".free").click(function(){isEmpty(order)&&($(".orderPane").css("left","0px"),setTimeout(function(){$(".orderPane").css("left","-300px")},1e3));var e='<div class="ticket" id="sum'+this.id+'"><div class="inside">Seat no. '+this.id+'<br /><select id="select"><option value="normalny">Adult [17$]</option><option value="ulgowy">Child [13$]</option></select></div></div>';order.hasOwnProperty(this.id)?(delete order[this.id],$("#sum"+this.id).remove(),$(this).toggleClass(" select")):(order[this.id]={booked:!0},$(".orders").append(e),$("#sum"+this.id).bind("click",function(e){e.stopPropagation()}),$("#sum"+this.id).slideDown("slow"),$(this).toggleClass(" select"))})}var data,places=document.getElementById("places"),order={},hasOwnProperty=Object.prototype.hasOwnProperty;$(function(){places.innerHTML="Wait....",$.getJSON("cinema-halls.json",function(e){data=e,generPlaces(data),clc()})}),$("#confirm").click(function(){isEmpty(order)?($("#alertBox").css("top","0px"),$("#alertBox").html("You haven't picked any tickets!<br />Select free seats and click green label ORDER on the left hand side.!"),setTimeout(function(){$("#alertBox").css("top","-100px")},3e3)):($(".confirmation").fadeIn("slow"),$(".form").fadeIn("slow"),$.each(order,function(e,i){$("ul").append("<li>"+e+" is booked: "+i.booked+"</li>")}))}),$(".confirmation").click(function(){$(this).fadeOut("slow"),$(this).next().fadeOut("slow")}),$("#btnLast").click(function(){var e=$("#name").val(),i=$("#phone").val(),t=$("#mail").val();""===e||""===i||""===t?($("#alertBox").css("top","0px"),$("#alertBox").html("Fill out all fields!"),setTimeout(function(){$("#alertBox").css("top","-100px")},3e3)):($.each(order,function(s,o){o.name=e,o.phone=i,o.mail=t}),console.log(JSON.stringify(order)),$("#successBox").css("top","0px"),$("#successBox").html('<i class="fa fa-check-circle-o" aria-hidden="true"></i> You have booked tickets!'),setTimeout(function(){$("#successBox").css("top","-100px")},3e3))}),$(".orderPane").click(function(){"0px"===$(this).css("left")?$(this).css("left","-300px"):$(this).css("left","0px")});